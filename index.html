<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Wortspiel</title>
    <meta name="description" content="Interaktives deutsches Wortspiel f√ºr Grundsch√ºler mit Rechtschreibpr√ºfung und Chaos Modus. Lerne spielend die deutsche Sprache!">
    <meta name="theme-color" content="#4A9FD9">
    
    <!-- Open Graph Meta Tags f√ºr Social Sharing -->
    <meta property="og:title" content="Wortspiel - Deutsches Lesespiel f√ºr Grundsch√ºler">
    <meta property="og:description" content="Interaktives deutsches Wortspiel mit Rechtschreibpr√ºfung und Chaos Modus. Lerne spielend die deutsche Sprache!">
    <meta property="og:type" content="website">
    
    <!-- PWA Manifest -->
    <link rel="manifest" id="site-manifest" href="./manifest.json">
    
    <!-- Apple Touch Icon f√ºr iOS Home Screen (PNG erforderlich) -->
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <link rel="apple-touch-icon-precomposed" href="apple-touch-icon.png">

    <!-- Favicon f√ºr Browser -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    
    <!-- PWA Meta Tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Wortspiel">
    
    <style>
        :root {
            /* Logo-inspirierte Farbpalette */
            --primary-blue: #4A9FD9;
            --primary-green: #7CB342;
            --primary-yellow: #FFC107;
            --primary-red: #E53935;
            --primary-orange: #FF9800;
            --gradient-bg: linear-gradient(135deg, #4A9FD9 0%, #7CB342 25%, #FFC107 50%, #FF9800 75%, #E53935 100%);
            --card-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            --border-radius: 16px;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-align: center;
            margin: 0;
            padding: 1rem;
            background: linear-gradient(135deg, #f5f7ff 0%, #e8f4f8 100%);
            min-height: 100vh;
            box-sizing: border-box;
        }
        
        .header {
            margin: 1rem 0 2rem 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }
        
        .logo {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--card-shadow);
            position: relative;
            overflow: hidden;
        }
        
        .logo::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: var(--gradient-bg);
            border-radius: 50%;
            z-index: -1;
        }
        
        .logo-content {
            font-size: 3rem;
            font-weight: bold;
            background: var(--gradient-bg);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        h1 {
            font-size: 2.5rem;
            margin: 0;
            background: var(--gradient-bg);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }
        
        #wort {
            font-size: 3rem;
            margin: 2rem 0;
            padding: 2rem;
            word-wrap: break-word;
            background: linear-gradient(135deg, #f8f9ff, #e8f4f8);
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            font-weight: 600;
            color: #2c3e50;
            border: 3px solid transparent;
            background-clip: padding-box;
            position: relative;
        }
        
        #wort::before {
            content: '';
            position: absolute;
            top: -3px;
            left: -3px;
            right: -3px;
            bottom: -3px;
            background: var(--gradient-bg);
            border-radius: var(--border-radius);
            z-index: -1;
        }
        
        #wortContainer {
            position: relative;
        }
        
        #wortEingabe {
            display: none;
            font-size: 3rem;
            margin: 2rem 0;
            padding: 2rem;
            word-wrap: break-word;
            background: linear-gradient(135deg, #f8f9ff, #e8f4f8);
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            font-weight: 600;
            color: #2c3e50;
            border: none;
            width: 100%;
            box-sizing: border-box;
            text-align: center;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: all 0.3s ease;
        }
        
        #wortEingabe:focus {
            outline: none;
            box-shadow: 0 0 20px rgba(74, 159, 217, 0.4);
        }
        
        #wortEingabe::placeholder {
            color: #aaa;
        }
        
        .wort-eingabe-aktiv #wort {
            display: none;
        }
        
        .wort-eingabe-aktiv #wortEingabe {
            display: block;
        }
        
        #timer {
            font-size: 2rem;
            background: var(--gradient-bg);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 1rem 0;
            font-weight: bold;
        }
        
        #count {
            margin-top: 1rem;
            font-size: 1.1rem;
            color: #333;
        }
        
        button {
            padding: 0.75rem 2rem;
            font-size: 1.1rem;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin: 1rem 0;
        }
        
        button:hover:not(:disabled) {
            background-color: #0056b3;
        }
        
        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        
        .class-selection {
            margin: 2rem auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            max-width: 600px;
            width: 100%;
        }
        
        .class-btn {
            margin: 0;
            padding: 1.5rem 2rem;
            font-size: 1.3rem;
            font-weight: 600;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .class-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }
        
        #class12Btn {
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-green));
        }
        
        #class34Btn {
            background: linear-gradient(135deg, var(--primary-green), var(--primary-yellow));
        }
        
        .chaos-btn {
            background: linear-gradient(135deg, var(--primary-red), var(--primary-orange));
        }
        
        .wortspiel-btn {
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-yellow));
        }
        
        .class-btn.selected {
            transform: scale(1.05);
        }
        
        .game-area {
            display: none;
            position: relative;
            min-height: 100vh;
            padding-bottom: 80px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .game-area.active {
            display: block;
        }
        
        .game-card {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            padding: 2rem;
            margin: 1rem 0;
            position: relative;
            overflow: hidden;
        }
        
        .game-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-bg);
        }
        
        .info {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            padding: 1.5rem;
            margin: 2rem 0;
            text-align: left;
        }
        
        .info p {
            margin: 0.8rem 0;
            color: #555;
            font-size: 1rem;
            line-height: 1.5;
        }
        
        .info strong {
            background: var(--gradient-bg);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 600;
        }
        
        /* Spezielle Styles f√ºr die Game-Area Buttons */
        #nextBtn {
            display: block;
            margin: 2rem auto;
            padding: 1.2rem 3rem;
            font-size: 1.4rem;
            background: linear-gradient(135deg, var(--primary-green), var(--primary-blue));
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        #nextBtn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }
        
        #resetBtn {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #6c757d;
            padding: 0.75rem 2rem;
            font-size: 1rem;
            z-index: 1000;
        }
        
        #resetBtn:hover {
            background-color: #5a6268;
        }
        
        /* Chaos Modus Styles */
        .chaos-btn {
            background-color: #dc3545;
        }
        
        .chaos-btn:hover {
            background-color: #c82333;
        }
        
        .answer-buttons {
            display: none;
            margin: 2rem 0;
            gap: 1rem;
        }
        
        .answer-buttons.active {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        #correctBtn {
            background: linear-gradient(135deg, var(--primary-green), #4CAF50);
            padding: 1.2rem 2.5rem;
            font-size: 1.3rem;
            margin: 0.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        #correctBtn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(76, 175, 80, 0.3);
        }
        
        #wrongBtn {
            background: linear-gradient(135deg, var(--primary-red), #F44336);
            padding: 1.2rem 2.5rem;
            font-size: 1.3rem;
            margin: 0.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        #wrongBtn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(244, 67, 54, 0.3);
        }
        
        .word-status {
            font-size: 0.9rem;
            margin-top: 1rem;
            padding: 0.5rem;
            border-radius: 4px;
        }
        
        .word-status {
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            transition: all 0.3s ease;
        }
        
        .word-status.correct {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            color: #155724;
            border: 2px solid var(--primary-green);
        }
        
        .word-status.incorrect {
            background: linear-gradient(135deg, #f8d7da, #f5c6cb);
            color: #721c24;
            border: 2px solid var(--primary-red);
        }
        
        /* Das Wortspiel Modus Styles */
        .wortspiel-input-container {
            display: none;
            margin: 2rem 0;
            gap: 1rem;
            flex-direction: column;
            align-items: center;
        }
        
        .wortspiel-input-container.active {
            display: flex;
        }
        
        .wortspiel-input-container input {
            padding: 2rem;
            font-size: 3rem;
            border: none;
            border-radius: var(--border-radius);
            width: 100%;
            max-width: 800px;
            text-align: center;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #f8f9ff, #e8f4f8);
            font-weight: 600;
            color: #2c3e50;
            box-shadow: var(--card-shadow);
            position: relative;
        }
        
        .wortspiel-input-container input::placeholder {
            color: #aaa;
        }
        
        .wortspiel-input-container input:focus {
            outline: none;
            box-shadow: 0 0 20px rgba(74, 159, 217, 0.4);
        }
        #lesenBtn {
            display: none;
            margin: 1.5rem auto;
            padding: 1rem 2rem;
            font-size: 1.2rem;
            background: linear-gradient(135deg, var(--primary-yellow), var(--primary-orange));
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        #lesenBtn.active {
            display: block;
        }
        
        #lesenBtn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }
        
        .results-card {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            padding: 2rem;
            margin: 1rem 0;
            position: relative;
            overflow: hidden;
        }
        
        .results-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-bg);
        }
        
        .results-card h3 {
            background: var(--gradient-bg);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-top: 0;
        }
        
        /* Tablet-Styles */
        @media (max-width: 768px) {
            body {
                margin: 0.5rem;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            #wort {
                font-size: 2rem;
                margin: 1.5rem 0;
                padding: 0.75rem;
            }
            
            #timer {
                font-size: 1.3rem;
            }
            
            button {
                padding: 0.6rem 1.5rem;
                font-size: 1rem;
            }
            
            .class-btn {
                font-size: 1.1rem;
                padding: 0.8rem 1.8rem;
            }
        }
        
        /* Responsive Anpassungen f√ºr Game-Area Buttons */
        @media (max-width: 768px) {
            #nextBtn {
                padding: 0.8rem 2.5rem;
                font-size: 1.2rem;
            }
            
            #resetBtn {
                bottom: 15px;
                padding: 0.6rem 1.5rem;
                font-size: 0.9rem;
            }
            
            #correctBtn, #wrongBtn {
                padding: 0.8rem 1.5rem;
                font-size: 1.1rem;
                margin: 0.3rem;
            }
            
            .answer-buttons {
                gap: 0.5rem;
            }
        }
        
        /* Mobile-Styles */
        @media (max-width: 480px) {
            body {
                padding: 0.5rem;
            }
            
            .logo {
                width: 80px;
                height: 80px;
            }
            
            .logo-content {
                font-size: 2rem;
            }
            
            h1 {
                font-size: 1.8rem;
                margin: 0.5rem 0;
            }
            
            .game-area {
                padding-bottom: 70px;
            }
            
            .game-card {
                padding: 1.5rem;
            }
            
            #nextBtn {
                padding: 1rem 2rem;
                font-size: 1.2rem;
                margin: 1.5rem auto;
            }
            
            #resetBtn {
                bottom: 10px;
                padding: 0.8rem 1.5rem;
                font-size: 0.9rem;
            }
            
            #correctBtn, #wrongBtn {
                padding: 1rem 1.5rem;
                font-size: 1.1rem;
                margin: 0.3rem;
            }
            
            h2 {
                font-size: 1.3rem;
            }
            
            #wort {
                font-size: 1.5rem;
                margin: 1rem 0;
                padding: 0.5rem;
            }
            
            #timer {
                font-size: 1.1rem;
            }
            
            #count {
                font-size: 1rem;
            }
            
            button {
                padding: 0.5rem 1rem;
                font-size: 0.9rem;
                width: 80%;
                max-width: 200px;
            }
            
            .class-btn {
                display: block;
                width: 90%;
                margin: 0.5rem auto;
                font-size: 1rem;
            }
            
            .info {
                font-size: 0.9rem;
            }
        }
        
        /* Sehr kleine Bildschirme */
        @media (max-width: 320px) {
            h1 {
                font-size: 1.3rem;
            }
            
            #wort {
                font-size: 1.3rem;
            }
            
            #timer {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>

<div class="header">
    <div class="logo">
        <div class="logo-content">W</div>
    </div>
    <h1>Wortspiel</h1>
</div>

<div class="class-selection" id="classSelection">
    <h2>W√§hle deine Klassenstufe:</h2>
    <button class="class-btn" id="class12Btn">Klasse 1 & 2</button>
    <button class="class-btn" id="class34Btn">Klasse 3 & 4</button>
    <button class="class-btn chaos-btn" id="chaosModeBtn">üé≤ Chaos Modus</button>
    <button class="class-btn wortspiel-btn" id="daswortspielBtn">‚úçÔ∏è Das Wortspiel</button>
    <div class="info">
        <p><strong>Klasse 1 & 2:</strong> Grundwortschatz mit Artikeln (etwa 250 W√∂rter)</p>
        <p><strong>Klasse 3 & 4:</strong> Alle Grundw√∂rter + erweiterte W√∂rter mit Artikeln (etwa 550 W√∂rter)</p>
        <p><strong>üé≤ Chaos Modus:</strong> Rechtschreibung pr√ºfen - Richtig oder Falsch? (alle W√∂rter)</p>
        <p><strong>‚úçÔ∏è Das Wortspiel:</strong> W√∂rter lesen und richtig eingeben (alle W√∂rter)</p>
    </div>
</div>

<div class="game-area" id="gameArea">
    <div id="selectedClass"></div>
    
    <div class="game-card" id="gameCard">
        <div id="timer">60 s</div>
        <div id="wortContainer">
            <div id="wort">Bereit...</div>
            <input type="text" id="wortEingabe" placeholder="..." autocomplete="off" autocapitalize="none">
        </div>
        
        <button id="nextBtn" disabled>Weiter</button>
        <button id="lesenBtn">Gelesen</button>
        <div class="answer-buttons" id="answerButtons">
            <button id="correctBtn">‚úì Richtig</button>
            <button id="wrongBtn">‚úó Falsch</button>
        </div>
        
        <div id="wordStatus" class="word-status"></div>
    </div>
    
    <div id="count"></div>
    <button id="resetBtn">Zur√ºck</button>
</div>

<script>
/* -------------- JavaScript beginnt hier -------------- */

/* 1. Wortlisten f√ºr beide Klassenstufen */
const wortListe12 = [
  "ab","acht","also","alt","die Ampel","die Antwort","der Apfel","der April","arbeiten",
  "der Arm","der Ast","die Aufgabe","aufwachen","das Auge","der August","das Auto",
  "das Baby","baden","der Ball","die Bank","der Bauch","bauen","der Baum","das Bein","der Berg","die Biene",
  "das Bild","bin","die Birne","das Blatt","blau","bleiben","bl√ºhen","die Blume","die Bl√ºte",
  "der Boden","braun","der Brief","bringen","das Brot","der Bruder","das Buch","bunt","die Burg",
  "der Busch","der Cent","danken","dein","der Dezember","dich","der Dienstag","der Donnerstag",
  "die Dose","drei","das Ei","der Eimer","einmal","eins","elf","die Eltern","das Ende","eng",
  "die Ente","die Erde","euch","die Eule","der Euro","fallen","fangen","der Februar","das Feld",
  "das Fenster","das Feuer","finden","der Finger","die Flasche","fliegen","der Fl√ºgel","fragen",
  "die Frau","der Freitag","freuen","der Freund","die Frucht","der Fr√ºhling","f√ºnf","der Fu√ü",
  "die Gabel","der Garten","geben","gehen","gelb","das Geld","das Gem√ºse","das Gesicht",
  "gesund","das Gras","gro√ü","gr√ºn","gut","das Haar","haben","der Hals","halten","die Hand",
  "hart","der Hase","das Haus","die Haut","hei√ü","hei√üen","helfen","hell","der Herbst",
  "heute","die Hexe","die Hilfe","der Himmel","h√∂ren","die Hose","der Hund","hundert",
  "der Igel","immer","ja","das Jahr","der Januar","der Juli","der Junge","der Juni",
  "der K√§fer","der Kalender","kalt","die Katze","kaufen","das Kind","die Klasse","das Kleid",
  "klein","kommen","k√∂nnen","der Kopf","der K√∂rper","krank","die K√ºche","die Kuh",
  "lachen","das Laub","laufen","laut","leben","legen","leicht","leise",
  "lernen","lesen","das Licht","lieb","liegen",
  "machen","das M√§dchen","der Mai","malen","der Mann","der M√§rz","die Maus","die Milch","die Minute",
  "der Mittwoch","m√∂gen","der Monat","der Montag","morgen","der Mund","m√ºssen","die Mutter",
  "die Nacht","der Name","die Nase","der Nebel","nein","neu","neun","nie","der November",
  "das Obst","oft","das Ohr","der Oktober","der Onkel",
  "das Pferd","pflanzen","pflegen","die Pizza","die Puppe",
  "quaken",
  "der Raum","die Raupe","rechnen","reden","der Regen","reich","reisen","der Rock",
  "rollen","rot","der R√ºcken","rufen",
  "der Saft","sagen","das Salz","der Samstag","der Sand","der Satz","schauen","scheinen",
  "die Schere","das Schiff","schlafen","schlagen","der Schnee","schneiden","schnell",
  "sch√∂n","schreiben","der Schuh","die Schule","schwarz","die Schwester","sechs",
  "sehen","die Seife","die Seite","die Sekunde","der September","sieben","singen","sitzen",
  "der Sohn","sollen","der Sommer","die Sonne","der Sonntag","spielen","der Sport","stehen",
  "stellen","der Stift","still","die Stunde","suchen",
  "der Tag","die Tante","die Tasche","die Tasse","das Taxi","der Tee","das Tier","die Tochter","toll",
  "tragen","trinken","turnen",
  "√ºben","die Uhr",
  "der Vater","versuchen","vier","der Vogel",
  "wann","warm","warten","warum","waschen","das Wasser","weg","der Weg","weil",
  "wei√ü","weit","wenig","wer","werden","das Wetter","die Wiese","der Wind","der Winter",
  "die Woche","die Wolke","wollen","das Wort","der Wunsch",
  "der Zahn","der Zeh","zehn","zeigen","das Zimmer","zwei","zw√∂lf"
];

// Nur die zus√§tzlichen W√∂rter f√ºr Klasse 3 & 4
const zus√§tzlicheW√∂rter34 = [
  "der Abend","√§hnlich","√§ndern","anders","die Angst","√§rgern","der Arzt",
  "backen","die Bahn","bald","beginnen","das Beispiel","bei√üen","belohnen",
  "beobachten","bequem","bereits","der Beruf","besser","das Bett","bevor",
  "bewegen","bezahlen","biegen","bisschen","bitten","blicken","blind",
  "der Blitz","blo√ü","bohren","das Boot","b√∂se","boxen","der Brand","brennen","die Brille","die Br√ºcke",
  "der Computer",
  "die Decke","denken","deutsch","dick","der Donner","drau√üen","drehen","der Druck",
  "dumm","dunkel","d√ºnn","d√ºrfen","der Durst",
  "die Ecke","ehrlich","eigentlich","entdecken","entfernen","entwickeln",
  "erkl√§ren","erlauben","erleben","ern√§hren","erschrecken","erwarten",
  "erz√§hlen","essen","das Europa",
  "fahren","das Fahrrad","die Familie","der Fehler","die Ferien","der Fernseher","fertig",
  "fett","feucht","die Feuerwehr","der Flei√ü","flie√üen","das Flugzeug","der Fluss",
  "fl√ºssig","frei","fremd","fressen","der Frieden","frieren","frisch",
  "fr√∂hlich","fr√ºhst√ºcken","der Fuchs","f√ºhlen","f√ºllen",
  "das Geb√§ude","die Geburt","die Gefahr","gefallen","geheim","die Gemeinde","das Gesch√§ft",
  "das Gesetz","gestern","gewinnen","das Gewitter","gie√üen","glatt","das Gl√ºck",
  "gl√ºhen","der Gott","der Gru√ü",
  "das Handy","h√§ngen","h√§ufig","die Hecke","heizen","das Hemd","der Herr","die Hitze",
  "hoffen","die H√∂he","hohl","der Hunger",
  "impfen","informieren","das Interesse",
  "jede","jemand","jetzt","jung",
  "der K√§fig","der Kamm","kaputt","kennen","klar","klettern","die Kraft","kratzen",
  "die Kreuzung","kriechen","der Krieg","k√ºhl","der Kuss",
  "das Land","lang","langsam","der L√§rm","lassen","der Lehrer","letzte","leuchten",
  "das Lexikon","das Lied","links","der L√∂ffel",
  "der Magnet","die Maschine","das Meer","messen","das Messer","die Miete","der Mittag","die Mitte",
  "mixen","das Moos","der M√ºll",
  "der Nachmittag","n√§chste","nah","n√§hen","die Nahrung","nass","die Natur","nehmen",
  "niemand","die Nummer","die Nuss","n√ºtzlich",
  "ob","offen","das Ostern",
  "packen","das Paket","das Papier","passen","der Pilz","der Platz","pl√∂tzlich","das Programm",
  "das Quadrat","qu√§len","die Quelle",
  "das Radio","raten","rechts","das Reh","rei√üen","rennen","richtig","riechen",
  "die Ruhe","r√ºhren",
  "sammeln","schalten","scharf","der Schatten","schieben","schief","schlie√üen",
  "schlie√ülich","das Schloss","der Schl√ºssel","schmecken","der Schmutz","der Schreck",
  "schreien","der Schutz","schweigen","schwierig","schwimmen","schwitzen",
  "der See","seit","der Spa√ü","der Spaziergang","sp√§t","der Spiegel","spitz","die Stadt",
  "der Stamm","die Stange","stark","der Stiel","stimmen","der Stoff","der Strand","die Stra√üe",
  "der Strauch","der Strau√ü","streiten","das St√ºck","der Stuhl","der Sturm","s√º√ü",
  "die Tabelle","die Tanne","tausend","die Technik","das Telefon","der Teller","die Temperatur",
  "der Text","das Theater","das Thermometer","tief","die Tr√§ne","der Traum","treffen","trocken",
  "√ºberqueren","ungef√§hr","der Unterricht","der Urlaub",
  "die Vase","verbieten","verbrauchen","verbrennen","vergessen","der Verkehr",
  "verletzen","verlieren","verpacken","verschmutzen","vielleicht","voll",
  "die Vorfahrt","die Vorsicht",
  "wachsen","w√§hlen","w√§hrend","der Wald","wechseln","der Wecker","das Weihnachten",
  "wichtig","wiegen","wild","wissen","wohnen","die Wurzel",
  "die Zahl","zeichnen","die Zeitung","das Zeugnis","ziehen","das Ziel","der Zucker",
  "die Zukunft","zur√ºck","zusammen","die Zwiebel"
];

// Kombinierte Wortliste f√ºr Klasse 3 & 4 (Grundwortschatz + zus√§tzliche W√∂rter)
const wortListe34 = [...wortListe12, ...zus√§tzlicheW√∂rter34];

/* 2. Spielvariablen */
let timerId, restzeit = 60;
let initialRestzeit = 60; // Speichert die urspr√ºngliche Zeitdauer
let gelesen = 0;
let aktuell = "";
let aktuelleWortliste = [];
let gew√§hlteKlasse = "";
let chaosModus = false;
let daswortspielModus = false;
let istWortRichtig = true;
let korrekte = 0, falsche = 0;
let punkte = 0;
let wortspielWortGezeigt = false;

/* 3. DOM-Elemente */
const classSelection = document.getElementById('classSelection');
const gameArea = document.getElementById('gameArea');
const gameCard = document.getElementById('gameCard');
const class12Btn = document.getElementById('class12Btn');
const class34Btn = document.getElementById('class34Btn');
const chaosModeBtn = document.getElementById('chaosModeBtn');
const daswortspielBtn = document.getElementById('daswortspielBtn');
const selectedClassEl = document.getElementById('selectedClass');
const wortEl = document.getElementById('wort');
const timerEl = document.getElementById('timer');
const nextBtn = document.getElementById('nextBtn');
const resetBtn = document.getElementById('resetBtn');
const countEl = document.getElementById('count');
const answerButtons = document.getElementById('answerButtons');
const correctBtn = document.getElementById('correctBtn');
const wrongBtn = document.getElementById('wrongBtn');
const wordStatus = document.getElementById('wordStatus');
const wortContainer = document.getElementById('wortContainer');
const wortEingabe = document.getElementById('wortEingabe');
const lesenBtn = document.getElementById('lesenBtn');

/* 4. Klassenauswahl */
function w√§hleKlasse(klasse) {
    gew√§hlteKlasse = klasse;
    chaosModus = (klasse === 'chaos');
    daswortspielModus = (klasse === 'daswortspiel');
    
    // Setze die Zeitdauer basierend auf dem Modus
    if (daswortspielModus) {
        initialRestzeit = 180; // 3 Minuten f√ºr "Das Wortspiel"
    } else {
        initialRestzeit = 60; // 1 Minute f√ºr andere Modi
    }
    
    if (klasse === '12') {
        aktuelleWortliste = wortListe12;
        selectedClassEl.innerHTML = '<h3>üéØ Klasse 1 & 2 - Grundwortschatz</h3>';
    } else if (klasse === '34') {
        aktuelleWortliste = wortListe34;
        selectedClassEl.innerHTML = '<h3>üéØ Klasse 3 & 4 - Grundwortschatz + Erweiterung</h3>';
    } else if (klasse === 'chaos') {
        aktuelleWortliste = wortListe34; // Verwende alle W√∂rter f√ºr Chaos Modus
        selectedClassEl.innerHTML = '<h3>üé≤ Chaos Modus - Rechtschreibung pr√ºfen</h3>';
    } else if (klasse === 'daswortspiel') {
        aktuelleWortliste = wortListe34; // Verwende alle W√∂rter f√ºr Das Wortspiel
        selectedClassEl.innerHTML = '<h3>‚úçÔ∏è Das Wortspiel - W√∂rter eingeben</h3>';
    }
    
    // UI f√ºr verschiedene Modi anpassen
    if (chaosModus) {
        nextBtn.style.display = 'none';
        answerButtons.classList.add('active');
        wortContainer.classList.remove('wort-eingabe-aktiv');
    } else if (daswortspielModus) {
        nextBtn.style.display = 'none';
        answerButtons.classList.remove('active');
        wortContainer.classList.remove('wort-eingabe-aktiv');
    } else {
        nextBtn.style.display = 'block';
        answerButtons.classList.remove('active');
        wortContainer.classList.remove('wort-eingabe-aktiv');
    }
    
    classSelection.style.display = 'none';
    gameArea.classList.add('active');
    
    // Spiel initialisieren
    resetGame();
    zeigeWort();
    startTimer();
}

/* 5. Spiel zur√ºcksetzen */
function resetGame() {
    if (timerId) {
        clearInterval(timerId);
    }
    restzeit = initialRestzeit; // Nutze die Zeitdauer basierend auf dem Modus
    gelesen = 0;
    korrekte = 0;
    falsche = 0;
    punkte = 0;
    wortspielWortGezeigt = false;
    countEl.textContent = '';
    timerEl.textContent = `${initialRestzeit}s`;
    nextBtn.disabled = false;
    correctBtn.disabled = false;
    wrongBtn.disabled = false;
    wortEingabe.disabled = false;
    lesenBtn.disabled = false;
    wordStatus.textContent = '';
    wordStatus.className = 'word-status';
    wortEingabe.value = '';
    gameCard.classList.remove('wort-hidden');
    wortContainer.classList.remove('wort-eingabe-aktiv');
    wortEingabe.focus();
}

/* 6. Zur√ºck zur Klassenauswahl */
function zur√ºckZurAuswahl() {
    if (timerId) {
        clearInterval(timerId);
    }
    gameArea.classList.remove('active');
    classSelection.style.display = 'flex';
    resetGame();
    wortEl.textContent = 'Bereit...';
    lesenBtn.classList.remove('active');
    wortContainer.classList.remove('wort-eingabe-aktiv');
    gew√§hlteKlasse = '';
    chaosModus = false;
    daswortspielModus = false;
}

/* 7. Zuf√§lliges Wort ausw√§hlen */
function zufallWort() {
    return aktuelleWortliste[Math.floor(Math.random() * aktuelleWortliste.length)];
}

/* 8. Wort verfremden f√ºr Chaos Modus */
function verfremdeWort(wort) {
    // Artikel nie verfremden - sie bleiben immer richtig
    if (wort === 'der' || wort === 'die' || wort === 'das') {
        return wort;
    }
    
    // Entferne Artikel f√ºr die Verfremdung des Hauptworts
    let artikel = '';
    let hauptwort = wort;
    
    if (wort.startsWith('der ')) {
        artikel = 'der ';
        hauptwort = wort.substring(4);
    } else if (wort.startsWith('die ')) {
        artikel = 'die ';
        hauptwort = wort.substring(4);
    } else if (wort.startsWith('das ')) {
        artikel = 'das ';
        hauptwort = wort.substring(4);
    }
    
    // Deutsche Rechtschreibfehler-Typen die Grundsch√ºler h√§ufig machen
    const verfremdeTypen = [
        // ck-Fehler: ck wird zu k oder kk
        (w) => {
            if (w.includes('ck')) {
                return Math.random() < 0.5 ? w.replace(/ck/g, 'k') : w.replace(/ck/g, 'kk');
            }
            return w;
        },
        
        // Doppelte Konsonanten vergessen oder falsch setzen
        (w) => {
            const doppelKonsonanten = ['ll', 'nn', 'mm', 'ss', 'tt', 'ff', 'pp', 'dd'];
            for (let konsonant of doppelKonsonanten) {
                if (w.includes(konsonant)) {
                    // 50% Chance einzeln machen, 50% Chance verdreifachen
                    return Math.random() < 0.5 
                        ? w.replace(new RegExp(konsonant, 'g'), konsonant[0])
                        : w.replace(new RegExp(konsonant, 'g'), konsonant + konsonant[0]);
                }
            }
            // Oder f√§lschlicherweise doppelte Konsonanten hinzuf√ºgen
            const einfacheKonsonanten = ['n', 'm', 's', 't', 'f', 'p', 'd', 'l'];
            const pos = Math.floor(Math.random() * (w.length - 1)) + 1;
            if (einfacheKonsonanten.includes(w[pos]) && w[pos-1] !== w[pos] && w[pos+1] !== w[pos]) {
                return w.slice(0, pos) + w[pos] + w.slice(pos);
            }
            return w;
        },
        
        // h-Fehler: Dehnungs-h vergessen oder falsch setzen
        (w) => {
            // h nach Vokal entfernen
            if (w.match(/[aeiou]h/)) {
                return w.replace(/([aeiou])h/g, '$1');
            }
            // Oder f√§lschlicherweise h hinzuf√ºgen
            if (w.length > 3 && Math.random() < 0.3) {
                const vokale = ['a', 'e', 'i', 'o', 'u'];
                for (let i = 1; i < w.length - 1; i++) {
                    if (vokale.includes(w[i]) && !vokale.includes(w[i+1]) && w[i+1] !== 'h') {
                        return w.slice(0, i+1) + 'h' + w.slice(i+1);
                    }
                }
            }
            return w;
        },
        
        // ie/i-Verwechslung
        (w) => {
            if (w.includes('ie')) {
                return w.replace(/ie/g, 'i');
            } else if (w.includes('i') && !w.includes('ie')) {
                // Manchmal f√§lschlicherweise ie statt i
                return w.replace(/i([^e])/g, 'ie$1');
            }
            return w;
        },
        
        // ai/ei-Verwechslung
        (w) => {
            if (w.includes('ei')) {
                return w.replace(/ei/g, 'ai');
            } else if (w.includes('ai')) {
                return w.replace(/ai/g, 'ei');
            }
            return w;
        },
        
        // Buchstaben weglassen (h√§ufiger Fehler bei langen W√∂rtern)
        (w) => {
            if (w.length > 4) {
                // Nicht am Anfang oder Ende
                const pos = Math.floor(Math.random() * (w.length - 2)) + 1;
                return w.slice(0, pos) + w.slice(pos + 1);
            }
            return w;
        },
        
        // √Ñhnlich klingende Buchstaben vertauschen
        (w) => {
            const vertauschungen = [
                ['d', 't'], ['b', 'p'], ['g', 'k'], ['w', 'v'], ['f', 'v']
            ];
            const paar = vertauschungen[Math.floor(Math.random() * vertauschungen.length)];
            if (w.includes(paar[0])) {
                return w.replace(new RegExp(paar[0], 'g'), paar[1]);
            } else if (w.includes(paar[1])) {
                return w.replace(new RegExp(paar[1], 'g'), paar[0]);
            }
            return w;
        },
        
        // Gro√ü- und Kleinschreibung vertauschen (typischer Fehler bei Nomen)
        (w) => {
            if (w.length > 0) {
                // 50% Chance: Ersten Buchstaben klein schreiben
                if (w[0] === w[0].toUpperCase() && w[0] !== w[0].toLowerCase()) {
                    return w[0].toLowerCase() + w.slice(1);
                }
                // 50% Chance: Ersten Buchstaben gro√ü schreiben (wenn er klein ist)
                if (w[0] === w[0].toLowerCase() && w[0] !== w[0].toUpperCase()) {
                    return w[0].toUpperCase() + w.slice(1);
                }
            }
            return w;
        }
    ];
    
    // Zuf√§lligen Verfremde-Typ ausw√§hlen und anwenden
    let verfremdetes = hauptwort;
    let versuche = 0;
    
    // Mehrere Versuche, um sicherzustellen, dass das Wort tats√§chlich ge√§ndert wird
    while (verfremdetes === hauptwort && versuche < 5) {
        const typIndex = Math.floor(Math.random() * verfremdeTypen.length);
        verfremdetes = verfremdeTypen[typIndex](hauptwort);
        versuche++;
    }
    
    // Falls keine Verfremdung funktioniert hat, einfachen Fehler machen
    if (verfremdetes === hauptwort && hauptwort.length > 2) {
        // Letzten Buchstaben doppeln als Fallback
        verfremdetes = hauptwort + hauptwort[hauptwort.length - 1];
    }
    
    return artikel + verfremdetes;
}

/* 9. Zeige neues Wort */
function zeigeWort() {
    const originalWort = zufallWort();
    
    if (chaosModus) {
        // 70% Chance auf falsches Wort, 30% auf richtiges
        istWortRichtig = Math.random() < 0.3;
        
        if (istWortRichtig) {
            aktuell = originalWort;
        } else {
            aktuell = verfremdeWort(originalWort);
            // Sicherheit: Falls Verfremdung das Wort nicht ge√§ndert hat
            if (aktuell === originalWort) {
                aktuell = originalWort + 'x'; // Einfache Verfremdung als Fallback
                istWortRichtig = false;
            }
        }
        
        wortEl.textContent = aktuell;
        correctBtn.disabled = false;
        wrongBtn.disabled = false;
        wordStatus.textContent = '';
        wordStatus.className = 'word-status';
    } else if (daswortspielModus) {
        // Das Wortspiel Modus - zeige ein zuf√§lliges Wort
        aktuell = originalWort;
        wortEl.textContent = aktuell;
        wortEingabe.value = '';
        wordStatus.textContent = '';
        wordStatus.className = 'word-status';
        lesenBtn.disabled = false;
        
        // Wort wird angezeigt, Wort ist noch nicht gelesen
        wortspielWortGezeigt = false;
        wortContainer.classList.remove('wort-eingabe-aktiv');
        lesenBtn.classList.add('active');
        wortEingabe.focus();
    } else {
        aktuell = originalWort;
        wortEl.textContent = aktuell;
        nextBtn.disabled = false;
    }
}

/* 10. Chaos Modus - Antwort verarbeiten */
function verarbeiteAntwort(userAntwort) {
    const richtigeAntwort = istWortRichtig;
    const istKorrekt = (userAntwort === richtigeAntwort);
    
    if (istKorrekt) {
        korrekte++;
        wordStatus.textContent = istWortRichtig ? '‚úì Richtig! Das Wort ist korrekt geschrieben.' : '‚úì Richtig! Das Wort ist falsch geschrieben.';
        wordStatus.className = 'word-status correct';
    } else {
        falsche++;
        wordStatus.textContent = istWortRichtig ? '‚úó Falsch! Das Wort ist richtig geschrieben.' : '‚úó Falsch! Das Wort ist falsch geschrieben.';
        wordStatus.className = 'word-status incorrect';
    }
    
    gelesen++;
    correctBtn.disabled = true;
    wrongBtn.disabled = true;
    
    // Nach kurzer Verz√∂gerung n√§chstes Wort zeigen
    setTimeout(() => {
        if (restzeit > 0) {
            zeigeWort();
        }
    }, 1500);
}

/* 10b. Das Wortspiel Modus - Eingabe verarbeiten */
function verarbeiteWortspielEingabe() {
    const benutzerEingabe = wortEingabe.value.trim();
    const istKorrekt = benutzerEingabe === aktuell;
    
    gelesen++;
    
    if (istKorrekt) {
        punkte++;
        wordStatus.textContent = '‚úì Richtig! +1 Punkt';
        wordStatus.className = 'word-status correct';
    } else {
        wordStatus.textContent = `‚úó Falsch! Richtig: "${aktuell}"`;
        wordStatus.className = 'word-status incorrect';
    }
    
    wortEingabe.disabled = true;
    
    // Nach kurzer Verz√∂gerung n√§chstes Wort zeigen
    setTimeout(() => {
        if (restzeit > 0) {
            wortEingabe.disabled = false;
            zeigeWort();
        }
    }, 2000);
}

/* 10c. Das Wortspiel Modus - "Gelesen" Button Handler */
function handleGelessenButton() {
    wortspielWortGezeigt = true;
    wortContainer.classList.add('wort-eingabe-aktiv');
    lesenBtn.classList.remove('active');
    wortEingabe.value = '';
    wortEingabe.focus();
}

/* 11. Timer-Logik */
function startTimer() {
    timerEl.textContent = `${restzeit}s`;
    timerId = setInterval(() => {
        restzeit--;
        timerEl.textContent = `${restzeit}s`;
        if (restzeit <= 0) {
            clearInterval(timerId);
            nextBtn.disabled = true;
            correctBtn.disabled = true;
            wrongBtn.disabled = true;
            wortEingabe.disabled = true;
            lesenBtn.disabled = true;
            wortEl.textContent = "‚è∞ Zeit abgelaufen!";
            
            let ergebnisText = '';
            if (chaosModus) {
                const prozent = gelesen > 0 ? Math.round((korrekte / gelesen) * 100) : 0;
                ergebnisText = `
                    <div class="results-card">
                        <h3>üéâ Chaos Modus Ergebnis</h3>
                        <p><strong>${gelesen} W√∂rter gepr√ºft!</strong></p>
                        <p>‚úì Richtig: ${korrekte} | ‚úó Falsch: ${falsche}</p>
                        <p><strong>Genauigkeit: ${prozent}%</strong></p>
                        <p style="color: #666;">Modus: üé≤ Chaos Modus</p>
                    </div>
                `;
            } else if (daswortspielModus) {
                const prozent = gelesen > 0 ? Math.round((punkte / gelesen) * 100) : 0;
                ergebnisText = `
                    <div class="results-card">
                        <h3>üéâ Das Wortspiel Ergebnis</h3>
                        <p><strong>Punkte: ${punkte}</strong></p>
                        <p>‚úì Richtig: ${punkte} | ‚úó Falsch: ${gelesen - punkte}</p>
                        <p>${gelesen} W√∂rter angezeigt | Genauigkeit: ${prozent}%</p>
                        <p style="color: #666;">Modus: ‚úçÔ∏è Das Wortspiel</p>
                    </div>
                `;
            } else {
                const modusText = gew√§hlteKlasse === '12' ? 'Klasse 1 & 2' : 'Klasse 3 & 4';
                ergebnisText = `
                    <div class="results-card">
                        <h3>üéâ Ergebnis</h3>
                        <p><strong>Du hast ${gelesen} W√∂rter gelesen!</strong></p>
                        <p style="color: #666;">Wortschatz: ${modusText}</p>
                    </div>
                `;
            }
            countEl.innerHTML = ergebnisText;
        }
    }, 1000);
}

/* 12. Event Listener */
class12Btn.addEventListener('click', () => w√§hleKlasse('12'));
class34Btn.addEventListener('click', () => w√§hleKlasse('34'));
chaosModeBtn.addEventListener('click', () => w√§hleKlasse('chaos'));
daswortspielBtn.addEventListener('click', () => w√§hleKlasse('daswortspiel'));
resetBtn.addEventListener('click', zur√ºckZurAuswahl);

nextBtn.addEventListener('click', () => {
    gelesen++;
    zeigeWort();
});

// Chaos Modus Event Listener
correctBtn.addEventListener('click', () => verarbeiteAntwort(true));
wrongBtn.addEventListener('click', () => verarbeiteAntwort(false));

// Das Wortspiel Modus Event Listener
lesenBtn.addEventListener('click', handleGelessenButton);
wortEingabe.addEventListener('keypress', (e) => {
    if (e.key === 'Enter' && !wortEingabe.disabled) {
        verarbeiteWortspielEingabe();
    }
});

/* -------------- JavaScript endet hier -------------- */
</script>
</body>
</html>